<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finance Practice Tool - Bond Valuation</title>

    <!-- KaTeX for LaTeX rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

    <link rel="stylesheet" href="practice.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-nav">
                <a href="index.html" class="back-link">← Back to Topics</a>
            </div>
            <h1>Bond Valuation</h1>
            <div class="subtitle">Week 4 - MGMT 408</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar" style="width: 0%"></div>
            </div>
            <div class="problem-number" id="progressText">Problem 1 of 10</div>
        </header>

        <div class="problem-card" id="problemCard">
            <div class="problem-header">
                <div class="problem-meta">
                    <span class="badge" id="difficultyBadge">Easy</span>
                    <span class="badge" style="background-color: #EBF8FF; color: #2C5282;" id="topicBadge">Topic</span>
                </div>
            </div>

            <div class="problem-text" id="problemText">
                Loading problem...
            </div>

            <div class="formula-box hidden" id="formulaBox">
                <div class="formula-label">Formula:</div>
                <div id="formulaText"></div>
            </div>

            <div class="answer-section">
                <div class="input-group">
                    <label for="answerInput">Your Answer:</label>
                    <input type="number" id="answerInput" step="0.01" placeholder="Enter your answer">
                    <button class="btn-primary" id="submitBtn" onclick="checkAnswer()">Submit</button>
                </div>
            </div>

            <div id="feedbackBox" class="hidden"></div>

            <div class="navigation">
                <button class="btn-secondary" id="prevBtn" onclick="previousProblem()">Previous</button>
                <button class="btn-secondary" id="nextBtn" onclick="nextProblem()">Next Problem</button>
            </div>
        </div>
    </div>

    <!-- Calculator Toolbar -->
    <div class="calculator-toolbar">
        <button class="calculator-toggle-btn" onclick="toggleCalculator()">
            Calculator
        </button>
        <div class="calculator-container" id="calculatorContainer">
            <div class="calculator-display">
                <div class="calculator-expression" id="calcExpression">&nbsp;</div>
                <div class="calculator-result" id="calcResult">0</div>
            </div>
            <div class="calculator-buttons">
                <button class="calc-btn calc-btn-clear" onclick="calcClear()">AC</button>
                <button class="calc-btn" onclick="calcBackspace()">Del</button>
                <button class="calc-btn calc-btn-operator" onclick="calcAppend('^')">x^y</button>
                <button class="calc-btn calc-btn-operator" onclick="calcAppend('/')">÷</button>

                <button class="calc-btn" onclick="calcAppend('7')">7</button>
                <button class="calc-btn" onclick="calcAppend('8')">8</button>
                <button class="calc-btn" onclick="calcAppend('9')">9</button>
                <button class="calc-btn calc-btn-operator" onclick="calcAppend('*')">x</button>

                <button class="calc-btn" onclick="calcAppend('4')">4</button>
                <button class="calc-btn" onclick="calcAppend('5')">5</button>
                <button class="calc-btn" onclick="calcAppend('6')">6</button>
                <button class="calc-btn calc-btn-operator" onclick="calcAppend('-')">-</button>

                <button class="calc-btn" onclick="calcAppend('1')">1</button>
                <button class="calc-btn" onclick="calcAppend('2')">2</button>
                <button class="calc-btn" onclick="calcAppend('3')">3</button>
                <button class="calc-btn calc-btn-operator" onclick="calcAppend('+')">+</button>

                <button class="calc-btn" onclick="calcAppend('0')">0</button>
                <button class="calc-btn" onclick="calcAppend('.')">.</button>
                <button class="calc-btn" onclick="calcAppend('(')">(</button>
                <button class="calc-btn" onclick="calcAppend(')')">)</button>

                <button class="calc-btn calc-btn-equals" onclick="calcEquals()" style="grid-column: span 4;">=</button>
            </div>
        </div>
    </div>

    <script>
        window.pageConfig = { topicKey: 'bonds' };

        var problems = [
            {
                "id": "bond_001",
                "topic": "Coupon Payment Calculation",
                "difficulty": "easy",
                "problem_text": "A corporate bond has a face value of $1,000 and a coupon rate of 6%. The bond pays coupons semiannually. What is the amount of each coupon payment?",
                "formula": "C = \\frac{F \\times \\text{Coupon Rate}}{m}",
                "solution_steps": [
                    "Step 1: Identify the variables: F = $1,000, Coupon Rate = 6%, m = 2 (semiannual)",
                    "Step 2: Apply the coupon payment formula: C = (F × Coupon Rate) / m",
                    "Step 3: Substitute: C = (1000 × 0.06) / 2",
                    "Step 4: Calculate: C = 60 / 2",
                    "Step 5: Final answer: C = $30 per payment"
                ],
                "correct_answer": 30.00,
                "hints": {
                    "level_1": "The annual coupon is face value times the coupon rate, then divide by number of payments per year",
                    "level_2": "Annual coupon = $1,000 × 6% = $60, then divide by 2 for semiannual",
                    "level_3": "C = 60 / 2 = $30"
                }
            },
            {
                "id": "bond_002",
                "topic": "Bond Price from Yield",
                "difficulty": "medium",
                "problem_text": "You are given a bond with face value of $100, maturity of 4 years, annual coupon rate of 7%, and a yield to maturity of 8.5%. What is the price of this bond?",
                "formula": "P = \\frac{C}{1+y} + \\frac{C}{(1+y)^2} + \\frac{C}{(1+y)^3} + \\frac{C+F}{(1+y)^4}",
                "solution_steps": [
                    "Step 1: Calculate coupon: C = $100 × 7% = $7",
                    "Step 2: Set up the PV calculation with yield y = 8.5%",
                    "Step 3: P = 7/1.085 + 7/(1.085)² + 7/(1.085)³ + 107/(1.085)⁴",
                    "Step 4: P = 6.45 + 5.95 + 5.48 + 77.18",
                    "Step 5: Final answer: P = $95.06"
                ],
                "correct_answer": 95.06,
                "hints": {
                    "level_1": "The bond price is the present value of all future cash flows (coupons + face value) discounted at the yield",
                    "level_2": "Coupon = $7, discount each payment at 8.5%",
                    "level_3": "P = 7/1.085 + 7/1.085² + 7/1.085³ + 107/1.085⁴"
                }
            },
            {
                "id": "bond_003",
                "topic": "Bond Yield from Price",
                "difficulty": "medium",
                "problem_text": "A 3-year bond has a face value of $100, pays an annual coupon of 8%, and is currently selling for $97.50. What is the approximate yield to maturity?",
                "formula": "P = \\frac{C}{1+y} + \\frac{C}{(1+y)^2} + \\frac{C+F}{(1+y)^3}",
                "solution_steps": [
                    "Step 1: The price $97.50 is very close to $97.47 (which corresponds to y = 9%)",
                    "Step 2: Compare: At y = 8.5%, P = $98.71 (too high)",
                    "Step 3: At y = 9%, P = $97.47 (very close to $97.50)",
                    "Step 4: Since $97.50 is between these but much closer to $97.47",
                    "Step 5: Final answer: y ≈ 9.0%"
                ],
                "correct_answer": 9.0,
                "unit": "percent",
                "hints": {
                    "level_1": "Find which yield gives a price closest to $97.50",
                    "level_2": "At 9%, price = $97.47; at 8.5%, price = $98.71",
                    "level_3": "$97.50 is almost exactly $97.47, so yield ≈ 9%"
                }
            },
            {
                "id": "bond_004",
                "topic": "Premium vs Discount Bonds",
                "difficulty": "easy",
                "problem_text": "A bond has a coupon rate of 5% and a yield to maturity of 4%. Is this bond trading at a premium, par, or discount? If the face value is $1,000, and the bond is trading at $1,037, what is the dollar amount of the premium?",
                "formula": "\\text{Premium} = P - F \\quad (\\text{when Coupon Rate} > \\text{Yield})",
                "solution_steps": [
                    "Step 1: Compare coupon rate (5%) to yield (4%)",
                    "Step 2: Since Coupon Rate > Yield, the bond trades at a premium",
                    "Step 3: Premium = Price - Face Value",
                    "Step 4: Premium = $1,037 - $1,000",
                    "Step 5: Final answer: Premium = $37"
                ],
                "correct_answer": 37.00,
                "hints": {
                    "level_1": "When coupon rate exceeds yield, the bond trades above par (at a premium)",
                    "level_2": "Premium is the amount by which price exceeds face value",
                    "level_3": "Premium = $1,037 - $1,000"
                }
            },
            {
                "id": "bond_005",
                "topic": "Term Structure - Bond Pricing",
                "difficulty": "hard",
                "problem_text": "The term structure shows: r₁ = 4.5%, r₂ = 4.8%, r₃ = 5.0%. A 3-year bond pays annual coupons of $60 and has a face value of $1,000. Using the term structure (spot rates), what is the bond's price?",
                "formula": "P = \\frac{C}{1+r_1} + \\frac{C}{(1+r_2)^2} + \\frac{C+F}{(1+r_3)^3}",
                "solution_steps": [
                    "Step 1: Use different spot rates for each cash flow",
                    "Step 2: PV of Year 1 coupon: 60/(1.045) = $57.42",
                    "Step 3: PV of Year 2 coupon: 60/(1.048)² = $54.63",
                    "Step 4: PV of Year 3 (coupon + face): 1060/(1.050)³ = $915.65",
                    "Step 5: Total: P = 57.42 + 54.63 + 915.65",
                    "Step 6: Final answer: P = $1,027.70"
                ],
                "correct_answer": 1027.70,
                "hints": {
                    "level_1": "With the term structure, each cash flow is discounted at its own spot rate",
                    "level_2": "Year 1: 60/1.045, Year 2: 60/1.048², Year 3: 1060/1.050³",
                    "level_3": "Calculate: 57.42 + 54.63 + 915.65"
                }
            },
            {
                "id": "bond_006",
                "topic": "Treasury Pricing - Semiannual",
                "difficulty": "hard",
                "problem_text": "A T-note has 2 years to maturity, a coupon rate of 6%, semiannual coupons, and face value of $100. The term structure (EAR) is: r₀.₅ = 3.5%, r₁ = 3.8%, r₁.₅ = 4.0%, r₂ = 4.2%. What is the price?",
                "formula": "P = \\frac{C}{(1+r_{0.5})^{0.5}} + \\frac{C}{(1+r_1)^1} + \\frac{C}{(1+r_{1.5})^{1.5}} + \\frac{C+F}{(1+r_2)^2}",
                "solution_steps": [
                    "Step 1: Semiannual coupon = $100 × 6% / 2 = $3",
                    "Step 2: PV at 0.5yr: 3/(1.035)^0.5 = $2.95",
                    "Step 3: PV at 1yr: 3/(1.038)^1 = $2.89",
                    "Step 4: PV at 1.5yr: 3/(1.040)^1.5 = $2.83",
                    "Step 5: PV at 2yr: 103/(1.042)^2 = $94.86",
                    "Step 6: Total: P = 2.95 + 2.89 + 2.83 + 94.86",
                    "Step 7: Final answer: P = $103.53"
                ],
                "correct_answer": 103.53,
                "hints": {
                    "level_1": "Semiannual coupon is $3. Discount each payment using the appropriate spot rate and fractional year",
                    "level_2": "Remember to use the fractional exponents: (1+r)^0.5, (1+r)^1, (1+r)^1.5, (1+r)^2",
                    "level_3": "3/1.035^0.5 + 3/1.038^1 + 3/1.040^1.5 + 103/1.042^2"
                }
            },
            {
                "id": "bond_007",
                "topic": "Forward Rates",
                "difficulty": "hard",
                "problem_text": "The 1-year spot rate is 3.0% and the 2-year spot rate is 3.5%. What is the one-year forward rate (the rate for borrowing from year 1 to year 2)?",
                "formula": "f_{1,1} = \\frac{(1+r_2)^2}{1+r_1} - 1",
                "solution_steps": [
                    "Step 1: The forward rate makes borrowing long-term equivalent to rolling over short-term",
                    "Step 2: Apply the formula: f₁₁ = (1+r₂)²/(1+r₁) - 1",
                    "Step 3: f₁₁ = (1.035)²/(1.03) - 1",
                    "Step 4: f₁₁ = 1.071225/1.03 - 1",
                    "Step 5: f₁₁ = 1.04003 - 1",
                    "Step 6: Final answer: f₁₁ = 4.0% (approximately)"
                ],
                "correct_answer": 4.0,
                "unit": "percent",
                "hints": {
                    "level_1": "The forward rate equates the return from a 2-year investment to rolling over two 1-year investments",
                    "level_2": "(1+r₂)² = (1+r₁)(1+f₁₁), so f₁₁ = (1+r₂)²/(1+r₁) - 1",
                    "level_3": "Calculate: (1.035)²/1.03 - 1 = 0.04003 ≈ 4.0%"
                }
            },
            {
                "id": "bond_008",
                "topic": "Bond Price Change - Interest Rates",
                "difficulty": "medium",
                "problem_text": "A 20-year zero-coupon bond with face value $100 has a yield of 5%. What is the percentage change in price if the yield increases to 6%?",
                "formula": "\\%\\Delta = \\frac{P_{new} - P_{old}}{P_{old}} \\times 100",
                "solution_steps": [
                    "Step 1: Calculate initial price: P₀ = 100/(1.05)²⁰ = $37.69",
                    "Step 2: Calculate new price: P₁ = 100/(1.06)²⁰ = $31.18",
                    "Step 3: Calculate percentage change: (31.18 - 37.69)/37.69",
                    "Step 4: = -6.51/37.69",
                    "Step 5: = -0.1728",
                    "Step 6: Final answer: -17.3% (negative means price fell)"
                ],
                "correct_answer": -17.3,
                "unit": "percent",
                "hints": {
                    "level_1": "When yields rise, bond prices fall. Calculate both prices and find the percentage change",
                    "level_2": "P₀ = 100/1.05²⁰ = $37.69; P₁ = 100/1.06²⁰ = $31.18",
                    "level_3": "% change = (31.18 - 37.69)/37.69 × 100"
                }
            },
            {
                "id": "bond_009",
                "topic": "Zero-Coupon Bond Price Over Time",
                "difficulty": "easy",
                "problem_text": "A 25-year zero-coupon bond has a face value of $100 and a yield to maturity of 4%. What is the current price of this bond?",
                "formula": "P = \\frac{F}{(1+y)^T}",
                "solution_steps": [
                    "Step 1: For a zero-coupon bond, price = PV of face value only",
                    "Step 2: Apply the formula: P = F / (1+y)^T",
                    "Step 3: P = 100 / (1.04)^25",
                    "Step 4: (1.04)^25 = 2.6658",
                    "Step 5: P = 100 / 2.6658",
                    "Step 6: Final answer: P = $37.51"
                ],
                "correct_answer": 37.51,
                "hints": {
                    "level_1": "Zero-coupon bonds pay no coupons, so price is just the PV of face value",
                    "level_2": "P = Face Value / (1 + yield)^years",
                    "level_3": "P = 100 / (1.04)^25"
                }
            },
            {
                "id": "bond_010",
                "topic": "Credit Spread",
                "difficulty": "easy",
                "problem_text": "A corporate bond has a yield to maturity of 6.5%. A Treasury bond with the same maturity has a yield of 4.2%. What is the credit spread in basis points? (1 basis point = 0.01%)",
                "formula": "\\text{Credit Spread} = y_{\\text{corporate}} - y_{\\text{treasury}}",
                "solution_steps": [
                    "Step 1: The credit spread is the difference in yields between corporate and Treasury bonds",
                    "Step 2: Credit Spread = 6.5% - 4.2% = 2.3%",
                    "Step 3: Convert to basis points: 2.3% × 100 = 230 basis points",
                    "Step 4: Final answer: 230 basis points"
                ],
                "correct_answer": 230,
                "unit": "bps",
                "hints": {
                    "level_1": "Credit spread compensates investors for default risk above the risk-free rate",
                    "level_2": "Spread = Corporate yield - Treasury yield = 6.5% - 4.2%",
                    "level_3": "2.3% = 230 basis points (multiply by 100)"
                }
            }
        ];
    </script>
    <script src="practice.js"></script>
</body>
</html>
