<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Practice Final 2 - MGMT 408</title>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background-color: #f7fafc;
            color: #1a1a1a;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
        }

        header {
            background-color: #2C5282;
            color: white;
            padding: 2rem;
            margin-bottom: 2rem;
            border-radius: 12px;
            text-align: center;
        }

        h1 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .subtitle {
            font-size: 1rem;
            opacity: 0.9;
        }

        .back-link {
            display: inline-block;
            margin-bottom: 1.5rem;
            color: #2C5282;
            text-decoration: none;
            font-weight: 500;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        .progress-bar {
            background-color: #E2E8F0;
            border-radius: 8px;
            height: 8px;
            margin-bottom: 2rem;
            overflow: hidden;
        }

        .progress-fill {
            background-color: #48BB78;
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }

        .progress-text {
            text-align: center;
            margin-bottom: 1rem;
            color: #4A5568;
            font-size: 0.9rem;
        }

        .question-card {
            background: white;
            border: 2px solid #E2E8F0;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 1.5rem;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .question-number {
            font-size: 0.875rem;
            font-weight: 600;
            color: #2C5282;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .question-status {
            font-size: 0.75rem;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-weight: 500;
        }

        .status-unanswered {
            background-color: #FED7D7;
            color: #C53030;
        }

        .status-answered {
            background-color: #C6F6D5;
            color: #276749;
        }

        .question-text {
            font-size: 1.1rem;
            color: #2D3748;
            margin-bottom: 1.5rem;
            line-height: 1.8;
        }

        .question-context {
            background-color: #F7FAFC;
            border-left: 4px solid #2C5282;
            padding: 1rem;
            margin-bottom: 1.5rem;
            font-size: 0.95rem;
            color: #4A5568;
        }

        .options-list {
            list-style: none;
        }

        .option-item {
            margin-bottom: 0.75rem;
        }

        .option-label {
            display: flex;
            align-items: center;
            padding: 1rem;
            border: 2px solid #E2E8F0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .option-label:hover {
            border-color: #2C5282;
            background-color: #EBF8FF;
        }

        .option-label.selected {
            border-color: #2C5282;
            background-color: #EBF8FF;
        }

        .option-label.correct {
            border-color: #48BB78;
            background-color: #C6F6D5;
        }

        .option-label.incorrect {
            border-color: #FC8181;
            background-color: #FED7D7;
        }

        .option-radio {
            display: none;
        }

        .option-marker {
            width: 24px;
            height: 24px;
            border: 2px solid #CBD5E0;
            border-radius: 50%;
            margin-right: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.8rem;
            color: #718096;
            flex-shrink: 0;
        }

        .option-label.selected .option-marker {
            border-color: #2C5282;
            background-color: #2C5282;
            color: white;
        }

        .option-label.correct .option-marker {
            border-color: #48BB78;
            background-color: #48BB78;
            color: white;
        }

        .option-label.incorrect .option-marker {
            border-color: #FC8181;
            background-color: #FC8181;
            color: white;
        }

        .option-text {
            font-size: 1rem;
            color: #2D3748;
        }

        .solution-box {
            display: none;
            margin-top: 1.5rem;
            padding: 1.5rem;
            background-color: #F0FFF4;
            border: 1px solid #9AE6B4;
            border-radius: 8px;
        }

        .solution-box.show {
            display: block;
        }

        .solution-title {
            font-weight: 600;
            color: #276749;
            margin-bottom: 0.75rem;
        }

        .solution-content {
            color: #2D3748;
            font-size: 0.95rem;
            line-height: 1.7;
        }

        .solution-formula {
            background-color: white;
            padding: 1rem;
            border-radius: 6px;
            margin-top: 0.75rem;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
        }

        .submit-section {
            text-align: center;
            margin-top: 2rem;
            padding: 2rem;
            background: white;
            border-radius: 12px;
            border: 2px solid #E2E8F0;
        }

        .submit-btn {
            background-color: #2C5282;
            color: white;
            padding: 1rem 3rem;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .submit-btn:hover {
            background-color: #2A4365;
        }

        .submit-btn:disabled {
            background-color: #A0AEC0;
            cursor: not-allowed;
        }

        .results-box {
            display: none;
            text-align: center;
            padding: 2rem;
            background: white;
            border-radius: 12px;
            border: 2px solid #E2E8F0;
            margin-top: 2rem;
        }

        .results-box.show {
            display: block;
        }

        .results-score {
            font-size: 3rem;
            font-weight: 700;
            color: #2C5282;
            margin-bottom: 0.5rem;
        }

        .results-text {
            font-size: 1.1rem;
            color: #4A5568;
            margin-bottom: 1.5rem;
        }

        .results-breakdown {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 1.5rem;
        }

        .breakdown-item {
            text-align: center;
        }

        .breakdown-number {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .breakdown-label {
            font-size: 0.875rem;
            color: #718096;
        }

        .correct-color {
            color: #48BB78;
        }

        .incorrect-color {
            color: #FC8181;
        }

        .retry-btn {
            background-color: #48BB78;
            color: white;
            padding: 0.75rem 2rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            margin-right: 1rem;
        }

        .retry-btn:hover {
            background-color: #38A169;
        }

        footer {
            text-align: center;
            margin-top: 4rem;
            padding: 2rem;
            color: #718096;
            font-size: 0.875rem;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            h1 {
                font-size: 1.5rem;
            }

            .question-card {
                padding: 1.5rem;
            }

            .option-label {
                padding: 0.75rem;
            }

            .results-breakdown {
                flex-direction: column;
                gap: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="final.html" class="back-link">&larr; Back to Practice Finals</a>

        <header>
            <h1>Practice Final 2</h1>
            <div class="subtitle">20 Multiple Choice Questions</div>
        </header>

        <div class="progress-text">
            <span id="answered-count">0</span> of 20 questions answered
        </div>
        <div class="progress-bar">
            <div class="progress-fill" id="progress-fill"></div>
        </div>

        <div id="questions-container"></div>

        <div class="submit-section" id="submit-section">
            <p style="margin-bottom: 1rem; color: #4A5568;">Answer all questions, then submit to see your results.</p>
            <button class="submit-btn" id="submit-btn" onclick="submitExam()">Submit Exam</button>
        </div>

        <div class="results-box" id="results-box">
            <div class="results-score" id="results-score">0%</div>
            <div class="results-text" id="results-text">You got 0 out of 20 correct</div>
            <div class="results-breakdown">
                <div class="breakdown-item">
                    <div class="breakdown-number correct-color" id="correct-count">0</div>
                    <div class="breakdown-label">Correct</div>
                </div>
                <div class="breakdown-item">
                    <div class="breakdown-number incorrect-color" id="incorrect-count">0</div>
                    <div class="breakdown-label">Incorrect</div>
                </div>
            </div>

            <!-- Topic Breakdown Section -->
            <div id="topic-breakdown" style="margin: 2rem 0; padding: 1.5rem; background-color: #F7FAFC; border-radius: 8px; text-align: left;"></div>

            <!-- Focus Recommendation -->
            <div id="focus-recommendation" style="margin-bottom: 1.5rem; padding: 1rem; border-radius: 8px; display: none;"></div>

            <button class="retry-btn" onclick="location.reload()">Try Again</button>
            <a href="final.html" class="retry-btn" style="text-decoration: none; display: inline-block;">Back to Finals</a>
        </div>

        <footer>
            UCLA Anderson School of Management
        </footer>
    </div>

    <script>
        const questions = [
            {
                id: 1,
                context: null,
                question: "Which of the following is FALSE about portfolio diversification?",
                options: [
                    { label: "a", text: "Diversification reduces a portfolio's total risk" },
                    { label: "b", text: "Diversification can eliminate systematic risk" },
                    { label: "c", text: "The benefit of diversification increases as correlation decreases" },
                    { label: "d", text: "Adding uncorrelated assets reduces portfolio variance" },
                    { label: "e", text: "Even with many stocks, some risk remains" }
                ],
                correctAnswer: "b",
                solution: "What is this question asking?\\nWe need to identify which statement about portfolio diversification is FALSE.\\n\\nKey concept: Total Risk = Systematic Risk + Unsystematic Risk. Diversification reduces unsystematic risk but cannot eliminate systematic risk.\\n\\nLet's evaluate each statement:\\n\\n(a) 'Diversification reduces a portfolio's total risk' — TRUE. By combining assets that don't move perfectly together, total risk decreases.\\n\\n(b) 'Diversification can eliminate systematic risk' — FALSE. Systematic risk (also called market risk) affects ALL securities and cannot be diversified away. Even a portfolio of 1,000 stocks still faces systematic risk from economy-wide factors like recessions, interest rate changes, and inflation.\\n\\n(c) 'The benefit of diversification increases as correlation decreases' — TRUE. Lower correlation means asset returns move less in sync, providing greater risk reduction when combined.\\n\\n(d) 'Adding uncorrelated assets reduces portfolio variance' — TRUE. When correlation = 0, the cross-term in the portfolio variance formula is zero, and portfolio variance is less than the weighted average of individual variances.\\n\\n(e) 'Even with many stocks, some risk remains' — TRUE. No matter how many stocks you add, systematic risk always remains.\\n\\nThe answer is (b). The critical distinction: diversification eliminates unsystematic (firm-specific) risk, NOT systematic (market) risk.",
                formula: "Total Risk = Systematic Risk + Unsystematic Risk\nDiversification eliminates unsystematic risk only",
                week: 6,
                topic: "Risk & Return"
            },
            {
                id: 2,
                context: "Consider two stocks: Stock A has variance 0.04 and Stock B has variance 0.09. The correlation between them is 0.0. You form an equally weighted portfolio (50% in each).",
                question: "The standard deviation of this equally weighted portfolio is closest to:",
                options: [
                    { label: "a", text: "13%" },
                    { label: "b", text: "15%" },
                    { label: "c", text: "18%" },
                    { label: "d", text: "22%" },
                    { label: "e", text: "25%" }
                ],
                correctAnswer: "c",
                solution: "What is this question asking?\\nWe need to find the standard deviation of a 50/50 portfolio of two stocks with known variances and zero correlation.\\n\\nKey formula: Portfolio Variance\\nVar_P = w_A^2 * Var_A + w_B^2 * Var_B + 2 * w_A * w_B * SD_A * SD_B * Corr\\n\\nStep 1: Identify the given information\\n- Variance of A = 0.04, so SD_A = sqrt(0.04) = 0.20 (20%)\\n- Variance of B = 0.09, so SD_B = sqrt(0.09) = 0.30 (30%)\\n- Correlation = 0.0\\n- Weights: w_A = 0.5, w_B = 0.5\\n\\nStep 2: Substitute into the portfolio variance formula\\nVar_P = (0.5)^2(0.04) + (0.5)^2(0.09) + 2(0.5)(0.5)(0.20)(0.30)(0)\\n\\nStep 3: Calculate each term\\n- First term: (0.25)(0.04) = 0.01\\n- Second term: (0.25)(0.09) = 0.0225\\n- Third term: 2(0.5)(0.5)(0.20)(0.30)(0) = 0 (drops out because correlation = 0)\\n- Var_P = 0.01 + 0.0225 + 0 = 0.0325\\n\\nStep 4: Take the square root to get standard deviation\\nSD_P = sqrt(0.0325) = 0.1803 = 18.0%\\n\\nKey insight: With zero correlation, you get significant diversification benefit. The simple weighted average SD would be 0.5(20%) + 0.5(30%) = 25%, but the actual portfolio SD is only 18%. This 7 percentage point reduction is the power of diversification.",
                formula: "Var_P = (0.5)^2(0.04) + (0.5)^2(0.09) + 0 = 0.0325\nSD_P = sqrt(0.0325) = 18.0%",
                week: 6,
                topic: "Risk & Return"
            },
            {
                id: 3,
                context: "A stock had the following annual returns over four years:\nYear 1: -6%\nYear 2: 20%\nYear 3: 14%\nYear 4: 8%",
                question: "The average annual return is closest to:",
                options: [
                    { label: "a", text: "7%" },
                    { label: "b", text: "8%" },
                    { label: "c", text: "9%" },
                    { label: "d", text: "10%" },
                    { label: "e", text: "12%" }
                ],
                correctAnswer: "c",
                solution: "What is this question asking?\\nWe need to find the arithmetic average annual return over four years of data.\\n\\nKey formula: Arithmetic Average Return\\nAverage = (R_1 + R_2 + R_3 + R_4) / n\\n\\nStep 1: List all annual returns\\n- Year 1: -6%\\n- Year 2: +20%\\n- Year 3: +14%\\n- Year 4: +8%\\n\\nStep 2: Sum all returns\\nSum = -6% + 20% + 14% + 8% = 36%\\n\\nStep 3: Divide by the number of observations (n = 4)\\nAverage = 36% / 4 = 9%\\n\\nVerification: The answer of 9% makes intuitive sense. Three of the four returns are positive (8%, 14%, 20%), and one is a modest negative (-6%). The average should be pulled between these values, and 9% is a reasonable center.\\n\\nNote: This is the arithmetic average, which is different from the geometric (compound) average. The arithmetic average is always greater than or equal to the geometric average. In finance, arithmetic averages are used for expected returns, while geometric averages better describe historical growth.",
                formula: "Average = (-6 + 20 + 14 + 8) / 4 = 36 / 4 = 9%",
                week: 6,
                topic: "Risk & Return"
            },
            {
                id: 4,
                context: "You have $60,000 in cash and borrow $40,000 at a risk-free rate of 5% to invest a total of $100,000 in a stock with an expected return of 15%.",
                question: "Your portfolio's expected return is closest to:",
                options: [
                    { label: "a", text: "15.0%" },
                    { label: "b", text: "18.3%" },
                    { label: "c", text: "20.0%" },
                    { label: "d", text: "21.7%" },
                    { label: "e", text: "25.0%" }
                ],
                correctAnswer: "d",
                solution: "What is this question asking?\\nYou have $60,000 of your own money and borrow $40,000 at 5% to invest $100,000 total in a stock returning 15%. What is the expected return on YOUR equity (the $60,000)?\\n\\nKey concept: Leveraged Portfolio Return. When you borrow to invest, you amplify both gains and losses. The return is calculated on your own capital, not the total investment.\\n\\nStep 1: Determine the weights relative to your own equity ($60,000)\\n- Weight in risky asset: $100,000 / $60,000 = 5/3 (about 1.667)\\n- Weight in borrowing: -$40,000 / $60,000 = -2/3 (about -0.667)\\n- Note: weights sum to 5/3 + (-2/3) = 3/3 = 1 (good check!)\\n\\nStep 2: Apply the leveraged return formula\\nE[R_P] = w_stock * R_stock + w_borrow * r_f\\n= (5/3)(15%) + (-2/3)(5%)\\n= (5/3)(15%) - (2/3)(5%)\\n\\nStep 3: Calculate\\n= 25% - 3.33% = 21.67%\\n\\nWhy this works: You earn 15% on the full $100,000 = $15,000. You pay 5% interest on $40,000 = $2,000. Your net gain is $13,000 on your $60,000 equity = 13,000/60,000 = 21.67%.\\n\\nKey insight: Leverage amplifies the expected return above the stock's 15%. But it also amplifies risk - if the stock dropped, your losses would also be magnified.",
                formula: "E[R_P] = (100/60)(15%) - (40/60)(5%) = 25% - 3.33% = 21.7%",
                week: 6,
                topic: "Risk & Return"
            },
            {
                id: 5,
                context: "The market expected return is 9% and the risk-free rate is 3%. A stock has a beta of 0.8 and an expected return of 10%.",
                question: "The stock's alpha (abnormal return relative to CAPM) is closest to:",
                options: [
                    { label: "a", text: "-2.2%" },
                    { label: "b", text: "0%" },
                    { label: "c", text: "1.0%" },
                    { label: "d", text: "2.2%" },
                    { label: "e", text: "4.8%" }
                ],
                correctAnswer: "d",
                solution: "What is this question asking?\\nWe need to find the stock's alpha, which is the difference between its actual expected return and what CAPM says it should earn given its risk (beta).\\n\\nKey formulas:\\n- CAPM Expected Return: E[R] = r_f + beta * (E[R_m] - r_f)\\n- Alpha = Actual Expected Return - CAPM Expected Return\\n\\nStep 1: Identify the given information\\n- Risk-free rate (r_f) = 3%\\n- Market expected return (E[R_m]) = 9%\\n- Market risk premium = 9% - 3% = 6%\\n- Stock beta = 0.8\\n- Stock's actual expected return = 10%\\n\\nStep 2: Calculate the CAPM-predicted return (what it SHOULD earn)\\nE[R] = r_f + beta * (E[R_m] - r_f)\\n= 3% + 0.8 * (9% - 3%)\\n= 3% + 0.8 * 6%\\n= 3% + 4.8% = 7.8%\\n\\nStep 3: Calculate alpha\\nAlpha = Actual expected return - CAPM predicted return\\n= 10% - 7.8% = 2.2%\\n\\nInterpretation: A positive alpha of 2.2% means this stock is expected to earn 2.2% MORE than CAPM predicts for its level of risk. On the Security Market Line (SML) graph, this stock plots ABOVE the line, making it an attractive investment. A stock below the SML would have negative alpha and be considered overpriced.",
                formula: "CAPM E[R] = 3% + 0.8(9% - 3%) = 7.8%\nAlpha = 10% - 7.8% = 2.2%",
                week: 7,
                topic: "CAPM"
            },
            {
                id: 6,
                context: null,
                question: "According to the CAPM, which of the following determines a stock's expected return?",
                options: [
                    { label: "a", text: "Its total volatility (standard deviation)" },
                    { label: "b", text: "Its idiosyncratic risk" },
                    { label: "c", text: "Its beta (systematic risk)" },
                    { label: "d", text: "Its correlation with other individual stocks" },
                    { label: "e", text: "Its historical average return" }
                ],
                correctAnswer: "c",
                solution: "What is this question asking?\\nAccording to the CAPM, what single measure determines a stock's expected return?\\n\\nKey concept: The CAPM formula is E[R_i] = r_f + beta_i * (E[R_m] - r_f). The only stock-specific variable in this formula is beta.\\n\\nLet's evaluate each option:\\n\\n(a) 'Total volatility (standard deviation)' — INCORRECT. Total volatility includes both systematic and unsystematic risk. CAPM only compensates for systematic risk because unsystematic risk can be diversified away. Two stocks can have the same total volatility but very different betas and expected returns.\\n\\n(b) 'Idiosyncratic risk' — INCORRECT. Idiosyncratic (unsystematic/firm-specific) risk can be eliminated through diversification. Since investors can avoid this risk for free by diversifying, the market does not reward them for bearing it.\\n\\n(c) 'Beta (systematic risk)' — CORRECT. Beta measures how much a stock moves with the overall market. It captures systematic risk, which is the only risk investors are compensated for because it cannot be diversified away.\\n\\n(d) 'Correlation with other individual stocks' — INCORRECT. While correlations matter for portfolio construction, CAPM focuses specifically on a stock's sensitivity to the market portfolio (beta), not its pairwise correlations with other stocks.\\n\\n(e) 'Historical average return' — INCORRECT. Past returns do not determine future expected returns under CAPM. The model is forward-looking, based on risk exposure.\\n\\nThe answer is (c). In the CAPM world, beta is the sole determinant of expected return.",
                formula: "E[R_i] = r_f + beta_i * (E[R_m] - r_f)\nOnly beta matters for expected return",
                week: 7,
                topic: "CAPM"
            },
            {
                id: 7,
                context: "Consider three stocks in the market portfolio:\nNike: $120/share, 1.5 billion shares outstanding\nAmazon: $80/share, 2.0 billion shares outstanding\nDisney: $100/share, 1.6 billion shares outstanding",
                question: "Nike's weight in the market portfolio is closest to:",
                options: [
                    { label: "a", text: "25%" },
                    { label: "b", text: "30%" },
                    { label: "c", text: "33%" },
                    { label: "d", text: "36%" },
                    { label: "e", text: "40%" }
                ],
                correctAnswer: "d",
                solution: "What is this question asking?\\nWe need to find Nike's weight in the market portfolio, which is value-weighted (each stock's weight equals its market cap divided by the total market cap of all stocks).\\n\\nKey concept: Market Portfolio Weight\\nWeight_i = Market Cap_i / Total Market Cap\\nMarket Cap = Price per share * Shares outstanding\\n\\nStep 1: Calculate each company's market capitalization\\n- Nike: $120/share * 1.5 billion shares = $180 billion\\n- Amazon: $80/share * 2.0 billion shares = $160 billion\\n- Disney: $100/share * 1.6 billion shares = $160 billion\\n\\nStep 2: Calculate total market capitalization\\nTotal = $180B + $160B + $160B = $500 billion\\n\\nStep 3: Calculate Nike's weight\\nWeight_Nike = $180B / $500B = 0.36 = 36%\\n\\nVerification: All weights should sum to 100%.\\n- Nike: 180/500 = 36%\\n- Amazon: 160/500 = 32%\\n- Disney: 160/500 = 32%\\n- Total: 36% + 32% + 32% = 100% (checks out!)\\n\\nKey insight: In the market portfolio, larger companies get higher weights. Nike has the highest weight here not because its share price is highest, but because its total market cap ($180B) is the largest. Market cap, not share price alone, determines importance.",
                formula: "Nike cap = 120 * 1.5B = $180B\nTotal = $500B\nWeight = 180/500 = 36%",
                week: 7,
                topic: "CAPM"
            },
            {
                id: 8,
                context: null,
                question: "A stock has a beta of 2.0. The market return is 11% and the risk-free rate is 3%. According to the CAPM, the stock's expected return is:",
                options: [
                    { label: "a", text: "14%" },
                    { label: "b", text: "16%" },
                    { label: "c", text: "17%" },
                    { label: "d", text: "19%" },
                    { label: "e", text: "22%" }
                ],
                correctAnswer: "d",
                solution: "What is this question asking?\\nGiven a stock's beta, the market return, and the risk-free rate, what does CAPM predict for the stock's expected return?\\n\\nKey formula: CAPM\\nE[R_i] = r_f + beta_i * (E[R_m] - r_f)\\n\\nStep 1: Identify the given information\\n- Beta = 2.0 (this stock is twice as volatile as the market)\\n- Market return (E[R_m]) = 11%\\n- Risk-free rate (r_f) = 3%\\n\\nStep 2: Calculate the market risk premium\\nMarket Risk Premium = E[R_m] - r_f = 11% - 3% = 8%\\n\\nStep 3: Apply the CAPM formula\\nE[R] = r_f + beta * (E[R_m] - r_f)\\n= 3% + 2.0 * 8%\\n= 3% + 16%\\n= 19%\\n\\nVerification: A beta of 2.0 means this stock is expected to move twice as much as the market. The market earns an 8% premium above the risk-free rate, so this stock should earn 2 * 8% = 16% above the risk-free rate, giving 3% + 16% = 19%. This makes sense: higher beta means higher expected return as compensation for higher systematic risk.\\n\\nCommon mistake: Some students multiply beta by the market return (2.0 * 11% = 22%). This is wrong because beta multiplies only the market risk PREMIUM (the return above the risk-free rate), not the total market return.",
                formula: "E[R] = 3% + 2.0(11% - 3%) = 3% + 16% = 19%",
                week: 7,
                topic: "CAPM"
            },
            {
                id: 9,
                context: "The market portfolio has an expected return of 11%, a risk-free rate of 3%, and a standard deviation of 15%. The Sharpe ratio of the market portfolio is (11% - 3%) / 15% = 0.533.",
                question: "According to the CAPM, which portfolio has the highest Sharpe ratio?",
                options: [
                    { label: "a", text: "A well-diversified portfolio of small-cap stocks" },
                    { label: "b", text: "The market portfolio" },
                    { label: "c", text: "A portfolio of only technology stocks" },
                    { label: "d", text: "A portfolio combining stocks and bonds" },
                    { label: "e", text: "None - all portfolios have the same Sharpe ratio" }
                ],
                correctAnswer: "b",
                solution: "What is this question asking?\\nAccording to CAPM theory, which portfolio achieves the best risk-return tradeoff (highest Sharpe ratio)?\\n\\nKey concept: The Capital Market Line (CML) and the Tangency Portfolio. The Sharpe ratio measures excess return per unit of total risk: Sharpe = (E[R_P] - r_f) / SD_P.\\n\\nLet's evaluate each option:\\n\\n(a) 'A well-diversified portfolio of small-cap stocks' — INCORRECT. While well-diversified, it is not the optimal portfolio. It overweights small caps relative to the market.\\n\\n(b) 'The market portfolio' — CORRECT. In CAPM, the market portfolio IS the tangency portfolio. It sits at the point where the Capital Market Line (CML) is tangent to the efficient frontier, maximizing the Sharpe ratio. All investors should hold the market portfolio and adjust risk by lending/borrowing at the risk-free rate.\\n\\n(c) 'A portfolio of only technology stocks' — INCORRECT. This is not diversified enough. It has unsystematic risk that earns no additional return, so its Sharpe ratio is lower.\\n\\n(d) 'A portfolio combining stocks and bonds' — INCORRECT. A mix of stocks and bonds could lie on the CML (combining the market portfolio with risk-free lending), which gives the SAME Sharpe ratio as the market portfolio, not a higher one.\\n\\n(e) 'None - all portfolios have the same Sharpe ratio' — INCORRECT. Different portfolios have different Sharpe ratios. Only portfolios on the CML share the market portfolio's Sharpe ratio.\\n\\nThe answer is (b). The market portfolio is the optimal risky portfolio in CAPM - it offers the highest reward per unit of risk.",
                formula: "Sharpe Ratio = (E[R_P] - r_f) / SD_P\nThe market portfolio maximizes this ratio (CML tangency point)",
                week: 7,
                topic: "CAPM"
            },
            {
                id: 10,
                context: "A company has a market capitalization of $3 billion and total debt of $2 billion. The equity beta is 1.6 and the debt beta is 0.2.",
                question: "The company's asset (unlevered) beta is closest to:",
                options: [
                    { label: "a", text: "0.72" },
                    { label: "b", text: "0.88" },
                    { label: "c", text: "1.04" },
                    { label: "d", text: "1.20" },
                    { label: "e", text: "1.60" }
                ],
                correctAnswer: "c",
                solution: "What is this question asking?\\nWe need to 'unlever' the equity beta to find the asset beta (also called unlevered beta), which represents the risk of the firm's underlying business operations, separate from its financing decisions.\\n\\nKey formula: Asset Beta (Unlevered Beta)\\nBeta_Asset = (E/V) * Beta_Equity + (D/V) * Beta_Debt\\nwhere V = E + D (Enterprise Value = Equity + Debt)\\n\\nStep 1: Identify the given information\\n- Equity (E) = $3 billion (market capitalization)\\n- Debt (D) = $2 billion\\n- Equity beta = 1.6\\n- Debt beta = 0.2\\n\\nStep 2: Calculate Enterprise Value and weights\\n- V = E + D = $3B + $2B = $5B\\n- Equity weight: E/V = 3/5 = 0.60 (60%)\\n- Debt weight: D/V = 2/5 = 0.40 (40%)\\n\\nStep 3: Calculate asset beta\\nBeta_Asset = (E/V) * Beta_E + (D/V) * Beta_D\\n= (3/5)(1.6) + (2/5)(0.2)\\n= 0.96 + 0.08\\n= 1.04\\n\\nWhy this works: The asset beta is a weighted average of the equity and debt betas, weighted by their proportions of firm value. Equity holders bear more risk than debt holders (equity beta of 1.6 vs. debt beta of 0.2), but the blended asset beta reflects the true business risk.\\n\\nKey insight: The asset beta (1.04) is lower than the equity beta (1.6) because leverage amplifies equity risk. If this firm had no debt, its equity beta would equal the asset beta of 1.04.",
                formula: "Beta_A = (3/5)(1.6) + (2/5)(0.2) = 0.96 + 0.08 = 1.04",
                week: 8,
                topic: "Cost of Capital"
            },
            {
                id: 11,
                context: "A division has an asset beta of 0.6, expected next year free cash flow of $50 million, and a perpetual growth rate of 3%. The risk-free rate is 4% and the market risk premium is 5%.",
                question: "The value of this division is closest to:",
                options: [
                    { label: "a", text: "$714 million" },
                    { label: "b", text: "$1,000 million" },
                    { label: "c", text: "$1,250 million" },
                    { label: "d", text: "$1,667 million" },
                    { label: "e", text: "$2,500 million" }
                ],
                correctAnswer: "c",
                solution: "What is this question asking?\\nWe need to value a division that generates perpetually growing cash flows. This requires two steps: (1) find the appropriate discount rate using CAPM, and (2) apply the growing perpetuity formula.\\n\\nKey formulas:\\n- CAPM: r = r_f + beta * Market Risk Premium\\n- Growing Perpetuity: V = FCF_1 / (r - g)\\n\\nStep 1: Identify the given information\\n- Asset beta = 0.6\\n- Next year's FCF = $50 million (this is FCF_1, already one year ahead)\\n- Perpetual growth rate (g) = 3%\\n- Risk-free rate (r_f) = 4%\\n- Market risk premium (MRP) = 5%\\n\\nStep 2: Calculate the cost of capital using CAPM\\nr = r_f + beta * MRP\\n= 4% + 0.6 * 5%\\n= 4% + 3% = 7%\\n\\nStep 3: Apply the growing perpetuity formula\\nV = FCF_1 / (r - g)\\n= $50M / (0.07 - 0.03)\\n= $50M / 0.04\\n= $1,250 million\\n\\nVerification: The discount rate (7%) must be greater than the growth rate (3%) for the growing perpetuity formula to work. Here 7% > 3%, so we are good.\\n\\nKey insight: We use the division's own asset beta (0.6) to find its cost of capital, NOT the firm's overall beta. Different divisions can have different risk levels and therefore different discount rates. Using the wrong beta would mis-value the division.",
                formula: "r = 4% + 0.6(5%) = 7%\nV = 50 / (0.07 - 0.03) = $1,250M",
                week: 8,
                topic: "Cost of Capital"
            },
            {
                id: 12,
                context: "A firm has two divisions:\nDivision 1: Asset beta = 1.5, next year FCF = $200M, perpetual growth = 2%\nDivision 2: Asset beta = 0.5, next year FCF = $300M, perpetual growth = 3%\nThe risk-free rate is 4% and the market risk premium is 5%.",
                question: "The total value of the firm is closest to:",
                options: [
                    { label: "a", text: "$5,000 million" },
                    { label: "b", text: "$7,500 million" },
                    { label: "c", text: "$10,700 million" },
                    { label: "d", text: "$12,000 million" },
                    { label: "e", text: "$15,000 million" }
                ],
                correctAnswer: "c",
                solution: "What is this question asking?\\nA firm has two divisions with different risk levels (betas) and growth rates. We must value each division separately using its own cost of capital, then add them together.\\n\\nKey concept: When divisions have different risk profiles, you MUST use different discount rates. Using a single firm-wide rate would overvalue risky divisions and undervalue safe ones.\\n\\nStep 1: Value Division 1 (high-risk, beta = 1.5)\\n- Cost of capital: r_1 = 4% + 1.5(5%) = 4% + 7.5% = 11.5%\\n- Growing perpetuity: V_1 = FCF_1 / (r_1 - g_1)\\n- V_1 = $200M / (0.115 - 0.02) = $200M / 0.095 = $2,105M\\n\\nStep 2: Value Division 2 (low-risk, beta = 0.5)\\n- Cost of capital: r_2 = 4% + 0.5(5%) = 4% + 2.5% = 6.5%\\n- Growing perpetuity: V_2 = FCF_2 / (r_2 - g_2)\\n- V_2 = $300M / (0.065 - 0.03) = $300M / 0.035 = $8,571M\\n\\nStep 3: Sum the division values\\nTotal Firm Value = V_1 + V_2 = $2,105M + $8,571M = $10,676M, which rounds to approximately $10,700M\\n\\nKey insight: Division 2 generates 60% of total value despite Division 1 having similar FCF, because Division 2 has a much lower discount rate (6.5% vs. 11.5%) and higher growth rate (3% vs. 2%). The denominator (r - g) for Division 2 is 3.5% versus 9.5% for Division 1, making each dollar of Division 2's cash flow far more valuable.\\n\\nCommon mistake: Using a single blended beta for the whole firm would give an incorrect total value. Always discount each division at its own risk-adjusted rate.",
                formula: "Div 1: r=11.5%, V=200/0.095=$2,105M\nDiv 2: r=6.5%, V=300/0.035=$8,571M\nTotal = $10,676M ≈ $10,700M",
                week: 8,
                topic: "Cost of Capital"
            },
            {
                id: 13,
                context: "A firm has 20 million shares outstanding at $25 per share (equity = $500M) and $500M in debt. The equity cost of capital is 12%, the debt cost of capital is 8%, and the corporate tax rate is 25%.",
                question: "The firm's weighted average cost of capital (WACC) is closest to:",
                options: [
                    { label: "a", text: "7%" },
                    { label: "b", text: "8%" },
                    { label: "c", text: "9%" },
                    { label: "d", text: "10%" },
                    { label: "e", text: "12%" }
                ],
                correctAnswer: "c",
                solution: "What is this question asking?\\nWe need to calculate the firm's weighted average cost of capital (WACC), which is the blended cost of financing using both equity and debt, accounting for the tax benefit of debt.\\n\\nKey formula: WACC\\nWACC = (E/V) * r_E + (D/V) * r_D * (1 - t)\\nwhere V = E + D\\n\\nStep 1: Identify the given information\\n- Equity (E): 20 million shares * $25 = $500M\\n- Debt (D) = $500M\\n- Cost of equity (r_E) = 12%\\n- Cost of debt (r_D) = 8%\\n- Tax rate (t) = 25%\\n\\nStep 2: Calculate total firm value and capital structure weights\\n- V = E + D = $500M + $500M = $1,000M\\n- Equity weight: E/V = 500/1000 = 0.50 (50%)\\n- Debt weight: D/V = 500/1000 = 0.50 (50%)\\n\\nStep 3: Apply the WACC formula\\nWACC = (E/V) * r_E + (D/V) * r_D * (1 - t)\\n= (0.50)(12%) + (0.50)(8%)(1 - 0.25)\\n= (0.50)(12%) + (0.50)(8%)(0.75)\\n= 6% + 3% = 9%\\n\\nWhy the (1-t) term? Interest payments on debt are tax-deductible, so the after-tax cost of debt is lower than the stated rate. The pre-tax cost of debt is 8%, but the after-tax cost is 8% * (1 - 0.25) = 6%. The government effectively subsidizes debt financing by allowing interest deductions.\\n\\nVerification: WACC (9%) should fall between the after-tax cost of debt (6%) and the cost of equity (12%). Since the weights are 50/50, it should be exactly the midpoint: (6% + 12%)/2 = 9%. This checks out!",
                formula: "WACC = (500/1000)(12%) + (500/1000)(8%)(1-0.25)\n= 6% + 3% = 9%",
                week: 8,
                topic: "Cost of Capital"
            },
            {
                id: 14,
                context: "You sell (write) a call option with a strike price of $60. At expiration, the stock price is $75.",
                question: "Your payoff from this position is:",
                options: [
                    { label: "a", text: "-$75" },
                    { label: "b", text: "-$15" },
                    { label: "c", text: "$0" },
                    { label: "d", text: "$15" },
                    { label: "e", text: "$60" }
                ],
                correctAnswer: "b",
                solution: "What is this question asking?\\nYou SOLD (wrote) a call option. At expiration, the stock price is above the strike price. What is your payoff as the option writer?\\n\\nKey concept: The option writer's payoff is the mirror image (negative) of the buyer's payoff.\\n- Call BUYER payoff = max(S - K, 0)\\n- Call WRITER payoff = -max(S - K, 0)\\n\\nStep 1: Identify the given information\\n- You are the call WRITER (seller)\\n- Strike price (K) = $60\\n- Stock price at expiration (S) = $75\\n- Since S > K, the option is in-the-money and will be exercised\\n\\nStep 2: Calculate the buyer's payoff\\nBuyer's payoff = max(S - K, 0) = max(75 - 60, 0) = max(15, 0) = $15\\n\\nStep 3: Calculate the writer's payoff\\nWriter's payoff = -Buyer's payoff = -$15\\n\\nWhy you lose $15: The call buyer exercises the option, forcing you to sell the stock at the strike price of $60 when the stock is worth $75 in the market. You give up $15 of value per share.\\n\\nWhy the other answers are wrong:\\n- (a) -$75: This would mean losing the entire stock price, which doesn't happen.\\n- (c) $0: This would only be the case if S was at or below K ($60), where the option expires worthless.\\n- (d) $15: This is the BUYER's payoff, not the writer's. Remember, you SOLD the call.\\n- (e) $60: The strike price is not the payoff.\\n\\nNote: This is the payoff, not profit. The writer collected a premium upfront when selling the option, so the writer's profit = premium received - $15.",
                formula: "Writer payoff = -max(S - K, 0) = -max(75 - 60, 0) = -$15",
                week: 9,
                topic: "Options"
            },
            {
                id: 15,
                context: "A European put option with strike price $50 expires in one year. The stock is currently $48, the risk-free rate is 4%, and a European call option with the same strike and expiration is priced at $5.",
                question: "Using put-call parity, the put price is closest to:",
                options: [
                    { label: "a", text: "$3.08" },
                    { label: "b", text: "$4.04" },
                    { label: "c", text: "$5.08" },
                    { label: "d", text: "$6.00" },
                    { label: "e", text: "$7.00" }
                ],
                correctAnswer: "c",
                solution: "What is this question asking?\\nGiven the call price, stock price, strike price, and risk-free rate, we need to find the put price using put-call parity.\\n\\nKey formula: Put-Call Parity\\nC + PV(K) = P + S\\nRearranged to solve for the put: P = C + PV(K) - S\\n\\nStep 1: Identify the given information\\n- Strike price (K) = $50\\n- Time to expiration = 1 year\\n- Current stock price (S) = $48\\n- Risk-free rate = 4%\\n- Call price (C) = $5\\n\\nStep 2: Calculate the present value of the strike price\\nPV(K) = K / (1 + r)^T = $50 / (1.04)^1 = $50 / 1.04 = $48.08\\n\\nStep 3: Solve for the put price\\nP = C + PV(K) - S\\n= $5 + $48.08 - $48\\n= $5.08\\n\\nVerification using put-call parity (both sides should be equal):\\n- Left side: C + PV(K) = $5 + $48.08 = $53.08\\n- Right side: P + S = $5.08 + $48 = $53.08\\n- Both sides equal $53.08, so our answer checks out!\\n\\nIntuition: The put is slightly more expensive than the call ($5.08 vs. $5.00) because the stock ($48) is currently below the strike ($50), meaning the put is slightly in-the-money while the call is slightly out-of-the-money.\\n\\nKey insight: Put-call parity is a no-arbitrage relationship. It must hold for European options with the same strike and expiration. If it didn't, traders could earn risk-free profit by buying the cheap side and selling the expensive side.",
                formula: "P = C + PV(K) - S = 5 + 50/1.04 - 48\n= 5 + 48.08 - 48 = $5.08",
                week: 9,
                topic: "Options"
            },
            {
                id: 16,
                context: "A firm in the technology industry has an equity beta of 2.0 and a debt-to-equity ratio of 1.0 (equal amounts of debt and equity). The debt beta is 0. A comparable firm in the same industry has no debt.",
                question: "The unlevered (all-equity) comparable firm's equity beta should be closest to:",
                options: [
                    { label: "a", text: "0.50" },
                    { label: "b", text: "1.00" },
                    { label: "c", text: "1.50" },
                    { label: "d", text: "2.00" },
                    { label: "e", text: "2.50" }
                ],
                correctAnswer: "b",
                solution: "What is this question asking?\nWe need to find the asset (unlevered) beta of the levered firm, which would also be the equity beta of an identical unlevered firm in the same industry.\n\nKey concept: The asset beta reflects the business risk of the underlying operations, regardless of how the firm is financed. Two firms in the same industry with the same operations should have the same asset beta.\n\nStep 1: Find the capital structure weights\nD/E = 1.0 means Debt = Equity, so each is 50% of firm value.\nE/V = 0.5 and D/V = 0.5\n\nStep 2: Calculate the asset (unlevered) beta\nBeta_asset = (E/V) * Beta_E + (D/V) * Beta_D\n= (0.5)(2.0) + (0.5)(0)\n= 1.0 + 0 = 1.0\n\nStep 3: Apply to the comparable firm\nFor the unlevered comparable (no debt), equity beta = asset beta = 1.0. Since it has no debt, all risk is borne by equity holders, so equity beta equals the asset beta.\n\nKey insight: Leverage amplifies equity beta. The levered firm has equity beta of 2.0 because debt doubles the financial risk to equity holders. Remove the leverage, and the underlying business risk (asset beta) is only 1.0.",
                formula: "Beta_asset = (0.5)(2.0) + (0.5)(0) = 1.0\nUnlevered firm equity beta = asset beta = 1.0",
                week: 8,
                topic: "Cost of Capital"
            },
            {
                id: 17,
                context: null,
                question: "Which of the following is FALSE about European call options?",
                options: [
                    { label: "a", text: "A higher current stock price increases call value" },
                    { label: "b", text: "A higher strike price decreases call value" },
                    { label: "c", text: "Higher volatility increases call value" },
                    { label: "d", text: "The payoff at expiration is max(S - K, 0)" },
                    { label: "e", text: "A call option becomes more valuable as time to expiration decreases" }
                ],
                correctAnswer: "e",
                solution: "What is this question asking?\\nWe need to identify which statement about European call options is FALSE.\\n\\nKey concept: The five major factors that affect call option value are: stock price, strike price, volatility, time to expiration, and interest rates.\\n\\nLet's evaluate each statement:\\n\\n(a) 'A higher current stock price increases call value' — TRUE. A call gives you the right to buy at K. The higher S is above K, the more valuable that right becomes. The call moves closer to being in-the-money.\\n\\n(b) 'A higher strike price decreases call value' — TRUE. A higher strike price means you pay more when exercising. Paying $90 instead of $60 for a stock is less valuable, so the call is worth less.\\n\\n(c) 'Higher volatility increases call value' — TRUE. More volatility means a bigger chance the stock moves significantly up (big payoff), while your downside is capped at zero (you just don't exercise). More volatility = more upside potential with limited downside.\\n\\n(d) 'The payoff at expiration is max(S - K, 0)' — TRUE. This is the textbook definition. You exercise only if S > K, earning S - K. Otherwise the option expires worthless (payoff = 0).\\n\\n(e) 'A call option becomes more valuable as time to expiration decreases' — FALSE. This is backwards. More time to expiration means more opportunity for the stock price to move favorably, increasing option value. As time passes (time decay), options LOSE value - this is called theta decay. The statement claims the opposite.\\n\\nThe answer is (e). More time = more value for options, not less. Time works in favor of option holders.",
                formula: "Call value increases with: higher S, lower K, higher volatility, longer time to expiration\nCall payoff at expiration = max(S - K, 0)",
                week: 9,
                topic: "Options"
            },
            {
                id: 18,
                context: null,
                question: "Under the semi-strong form of market efficiency, which of the following strategies should NOT consistently generate abnormal returns?",
                options: [
                    { label: "a", text: "Trading based on insider information" },
                    { label: "b", text: "Trading based on published earnings reports" },
                    { label: "c", text: "Trading based on private board meeting discussions" },
                    { label: "d", text: "Both A and C" },
                    { label: "e", text: "All of the above" }
                ],
                correctAnswer: "b",
                solution: "What is this question asking?\\nUnder semi-strong form efficiency, which trading strategy should NOT be able to beat the market consistently?\\n\\nKey concept: The three forms of market efficiency:\\n- Weak form: prices reflect all past trading data (prices, volume). Technical analysis fails.\\n- Semi-strong form: prices reflect all PUBLIC information (earnings, news, filings). Fundamental analysis fails.\\n- Strong form: prices reflect ALL information (public + private). Even insider trading fails.\\n\\nLet's evaluate each option under SEMI-STRONG efficiency:\\n\\n(a) 'Trading based on insider information' — This CAN generate abnormal returns under semi-strong efficiency. Insider info is private, not public, so it's not yet reflected in prices.\\n\\n(b) 'Trading based on published earnings reports' — CANNOT generate abnormal returns. Published earnings are PUBLIC information. Under semi-strong efficiency, prices instantly adjust to public news. By the time you read the earnings report, the stock price has already moved.\\n\\n(c) 'Trading based on private board meeting discussions' — This CAN generate abnormal returns. Board discussions are private, not public information.\\n\\n(d) 'Both A and C' — Both involve private information, which can still generate abnormal returns under semi-strong efficiency.\\n\\n(e) 'All of the above' — Incorrect because (a) and (c) involve private information that is NOT reflected in prices under semi-strong efficiency.\\n\\nThe answer is (b). Semi-strong efficiency means all public information is already in the price. Only private/insider information could potentially beat the market. It would take STRONG form efficiency for even insider information to be useless.",
                formula: "Weak form: prices reflect past trading data\nSemi-strong: prices reflect all public information\nStrong form: prices reflect all information (public + private)",
                week: 10,
                topic: "Market Efficiency"
            },
            {
                id: 19,
                context: "A 3-year zero-coupon bond with a face value of $100 trades at $86.38.",
                question: "Its yield to maturity (YTM) is closest to:",
                options: [
                    { label: "a", text: "3.0%" },
                    { label: "b", text: "4.0%" },
                    { label: "c", text: "5.0%" },
                    { label: "d", text: "5.5%" },
                    { label: "e", text: "6.0%" }
                ],
                correctAnswer: "c",
                solution: "What is this question asking?\\nGiven the price and face value of a 3-year zero-coupon bond, what is the yield to maturity (YTM)?\\n\\nKey formula: Zero-Coupon Bond Pricing\\nPrice = Face Value / (1 + YTM)^n\\nSolving for YTM: YTM = (Face Value / Price)^(1/n) - 1\\n\\nStep 1: Identify the given information\\n- Face value = $100\\n- Price = $86.38\\n- Maturity (n) = 3 years\\n- No coupon payments (zero-coupon bond)\\n\\nStep 2: Set up the equation\\nPrice = Face Value / (1 + YTM)^n\\n86.38 = 100 / (1 + YTM)^3\\n\\nStep 3: Solve for (1 + YTM)^3\\n(1 + YTM)^3 = 100 / 86.38 = 1.15763\\n\\nStep 4: Take the cube root (raise to the 1/3 power)\\n1 + YTM = (1.15763)^(1/3) = 1.05\\nYTM = 0.05 = 5.0%\\n\\nVerification: Plug YTM = 5% back into the pricing formula.\\nPrice = 100 / (1.05)^3 = 100 / 1.157625 = $86.38. This matches the given price!\\n\\nKey insight: A zero-coupon bond makes no coupon payments. You buy it at a discount ($86.38) and receive face value ($100) at maturity. The YTM represents the annualized return from buying at the discount and holding to maturity. The difference between $100 and $86.38 ($13.62) is your total return over 3 years, which works out to 5% per year compounded.",
                formula: "86.38 = 100 / (1+YTM)^3\n(1+YTM)^3 = 1.15763\nYTM = (1.15763)^(1/3) - 1 = 5.0%",
                week: 10,
                topic: "Market Efficiency"
            },
            {
                id: 20,
                context: null,
                question: "Which statement best describes the Fama-French three-factor model?",
                options: [
                    { label: "a", text: "It uses only beta to explain returns" },
                    { label: "b", text: "It adds size and value factors to the market factor" },
                    { label: "c", text: "It replaces CAPM entirely with behavioral factors" },
                    { label: "d", text: "It shows markets are always efficient" },
                    { label: "e", text: "It uses momentum as its primary factor" }
                ],
                correctAnswer: "b",
                solution: "What is this question asking?\\nWe need to identify the correct description of the Fama-French three-factor model.\\n\\nKey concept: The Fama-French model extends CAPM by adding two risk factors (size and value) to better explain stock returns.\\nFormula: E[R_i] = r_f + beta_m(R_m - r_f) + beta_s(SMB) + beta_v(HML)\\n\\nLet's evaluate each option:\\n\\n(a) 'It uses only beta to explain returns' — INCORRECT. That describes the CAPM, not Fama-French. The whole point of Fama-French is that beta alone is insufficient.\\n\\n(b) 'It adds size and value factors to the market factor' — CORRECT. The three factors are:\\n  1. Market factor (R_m - r_f): same as CAPM, captures market risk\\n  2. SMB (Small Minus Big): the size factor. Small-cap stocks have historically earned higher returns than large-cap stocks.\\n  3. HML (High Minus Low): the value factor. Value stocks (high book-to-market ratio) have historically outperformed growth stocks (low book-to-market ratio).\\n\\n(c) 'It replaces CAPM entirely with behavioral factors' — INCORRECT. Fama-French EXTENDS CAPM (keeps the market factor) and adds risk-based factors, not behavioral factors. Fama and French are proponents of efficient markets.\\n\\n(d) 'It shows markets are always efficient' — INCORRECT. The model is about explaining returns, not proving market efficiency. Though Fama argues the factors represent risk, others argue they are anomalies.\\n\\n(e) 'It uses momentum as its primary factor' — INCORRECT. Momentum (winners keep winning) is NOT one of the three Fama-French factors. It was later added as a fourth factor in the Carhart four-factor model.\\n\\nThe answer is (b). Remember: Fama-French = Market + Size (SMB) + Value (HML).",
                formula: "E[R_i] = r_f + beta_m(R_m - r_f) + beta_s(SMB) + beta_v(HML)\nSMB = Small Minus Big (size factor)\nHML = High Minus Low (value factor)",
                week: 10,
                topic: "Market Efficiency"
            }
        ];

        // Topic configuration for analysis
        const topicConfig = {
            6: { name: "Risk & Return", shortName: "Risk/Return", url: "week6-riskreturn.html", color: "#3182CE" },
            7: { name: "CAPM", shortName: "CAPM", url: "week7-capm.html", color: "#38A169" },
            8: { name: "Cost of Capital", shortName: "Cost of Cap", url: "week8-costofcapital.html", color: "#D69E2E" },
            9: { name: "Options", shortName: "Options", url: "week9-options.html", color: "#E53E3E" },
            10: { name: "Market Efficiency", shortName: "Efficiency", url: "week10-efficiency.html", color: "#805AD5" }
        };

        let userAnswers = {};
        let examSubmitted = false;

        function renderQuestions() {
            const container = document.getElementById('questions-container');
            container.innerHTML = '';

            questions.forEach((q, index) => {
                const card = document.createElement('div');
                card.className = 'question-card';
                card.id = `question-${q.id}`;

                let contextHTML = '';
                if (q.context) {
                    contextHTML = `<div class="question-context">${q.context.replace(/\n/g, '<br>')}</div>`;
                }

                let optionsHTML = q.options.map(opt => `
                    <li class="option-item">
                        <label class="option-label" id="option-${q.id}-${opt.label}" onclick="selectAnswer(${q.id}, '${opt.label}')">
                            <input type="radio" name="q${q.id}" value="${opt.label}" class="option-radio">
                            <span class="option-marker">${opt.label.toUpperCase()}</span>
                            <span class="option-text">${opt.text}</span>
                        </label>
                    </li>
                `).join('');

                const topicInfo = topicConfig[q.week];
                card.innerHTML = `
                    <div class="question-header">
                        <span class="question-number">Question ${q.id}</span>
                        <div style="display: flex; gap: 0.5rem; align-items: center;">
                            <span style="font-size: 0.7rem; padding: 0.2rem 0.6rem; border-radius: 10px; background-color: ${topicInfo.color}20; color: ${topicInfo.color}; font-weight: 500;">Week ${q.week}: ${topicInfo.shortName}</span>
                            <span class="question-status status-unanswered" id="status-${q.id}">Unanswered</span>
                        </div>
                    </div>
                    ${contextHTML}
                    <div class="question-text">${q.question.replace(/\n/g, '<br>')}</div>
                    <ul class="options-list">
                        ${optionsHTML}
                    </ul>
                    <div class="solution-box" id="solution-${q.id}">
                        <div class="solution-title">Solution</div>
                        <div class="solution-content">${q.solution.replace(/\\\\n/g, '<br>').replace(/\n/g, '<br>')}</div>
                        <div class="solution-formula">${q.formula}</div>
                    </div>
                `;

                container.appendChild(card);
            });
        }

        function selectAnswer(questionId, answer) {
            if (examSubmitted) return;

            userAnswers[questionId] = answer;

            // Update visual selection
            questions.find(q => q.id === questionId).options.forEach(opt => {
                const label = document.getElementById(`option-${questionId}-${opt.label}`);
                label.classList.remove('selected');
            });
            document.getElementById(`option-${questionId}-${answer}`).classList.add('selected');

            // Update status
            const status = document.getElementById(`status-${questionId}`);
            status.textContent = 'Answered';
            status.className = 'question-status status-answered';

            updateProgress();
        }

        function updateProgress() {
            const answeredCount = Object.keys(userAnswers).length;
            document.getElementById('answered-count').textContent = answeredCount;
            document.getElementById('progress-fill').style.width = `${(answeredCount / questions.length) * 100}%`;
        }

        function submitExam() {
            examSubmitted = true;
            let correctCount = 0;

            // Track performance by topic
            const topicStats = {
                6: { correct: 0, total: 0, missed: [] },
                7: { correct: 0, total: 0, missed: [] },
                8: { correct: 0, total: 0, missed: [] },
                9: { correct: 0, total: 0, missed: [] },
                10: { correct: 0, total: 0, missed: [] }
            };

            questions.forEach(q => {
                const userAnswer = userAnswers[q.id];
                const isCorrect = userAnswer === q.correctAnswer;

                if (isCorrect) correctCount++;

                // Track by topic
                topicStats[q.week].total++;
                if (isCorrect) {
                    topicStats[q.week].correct++;
                } else {
                    topicStats[q.week].missed.push(q.id);
                }

                // Show correct/incorrect styling
                q.options.forEach(opt => {
                    const label = document.getElementById(`option-${q.id}-${opt.label}`);
                    label.classList.remove('selected');

                    if (opt.label === q.correctAnswer) {
                        label.classList.add('correct');
                    } else if (opt.label === userAnswer && !isCorrect) {
                        label.classList.add('incorrect');
                    }
                });

                // Show solution
                document.getElementById(`solution-${q.id}`).classList.add('show');
            });

            // Show results
            const percentage = Math.round((correctCount / questions.length) * 100);
            document.getElementById('results-score').textContent = `${percentage}%`;
            document.getElementById('results-text').textContent = `You got ${correctCount} out of ${questions.length} correct`;
            document.getElementById('correct-count').textContent = correctCount;
            document.getElementById('incorrect-count').textContent = questions.length - correctCount;

            // Generate topic breakdown
            let breakdownHTML = '<h3 style="margin-bottom: 1rem; font-size: 1.1rem; color: #2D3748;">Performance by Topic</h3>';
            breakdownHTML += '<div style="display: grid; gap: 0.75rem;">';

            for (let week = 6; week <= 10; week++) {
                const stats = topicStats[week];
                if (stats.total === 0) continue;

                const topicInfo = topicConfig[week];
                const pct = Math.round((stats.correct / stats.total) * 100);
                const missed = stats.total - stats.correct;

                breakdownHTML += `
                    <div style="display: flex; align-items: center; gap: 1rem; padding: 0.75rem; background: white; border-radius: 6px; border-left: 4px solid ${topicInfo.color};">
                        <div style="flex: 1;">
                            <div style="font-weight: 600; color: #2D3748;">Week ${week}: ${topicInfo.name}</div>
                            <div style="font-size: 0.875rem; color: #718096;">${stats.correct}/${stats.total} correct (${pct}%)</div>
                        </div>
                        <div style="width: 80px; height: 8px; background: #E2E8F0; border-radius: 4px; overflow: hidden;">
                            <div style="width: ${pct}%; height: 100%; background: ${pct >= 70 ? '#48BB78' : pct >= 50 ? '#D69E2E' : '#E53E3E'};"></div>
                        </div>
                    </div>
                `;
            }
            breakdownHTML += '</div>';
            document.getElementById('topic-breakdown').innerHTML = breakdownHTML;

            // Find the topic that needs the most work
            let weakestTopic = null;
            let worstScore = 101;

            for (let week = 6; week <= 10; week++) {
                const stats = topicStats[week];
                if (stats.total > 0) {
                    const pct = (stats.correct / stats.total) * 100;
                    if (stats.missed.length > 0 && pct < worstScore) {
                        worstScore = pct;
                        weakestTopic = week;
                    }
                }
            }

            // Show focus recommendation if there's a weak area
            if (weakestTopic !== null) {
                const topicInfo = topicConfig[weakestTopic];
                const stats = topicStats[weakestTopic];
                const focusDiv = document.getElementById('focus-recommendation');
                focusDiv.style.display = 'block';
                focusDiv.style.backgroundColor = '#FFF5F5';
                focusDiv.style.border = '2px solid #FC8181';
                focusDiv.innerHTML = `
                    <div style="text-align: center;">
                        <div style="font-weight: 600; color: #C53030; margin-bottom: 0.5rem;">
                            Focus Area: Week ${weakestTopic} - ${topicInfo.name}
                        </div>
                        <div style="font-size: 0.9rem; color: #742A2A; margin-bottom: 1rem;">
                            You missed ${stats.missed.length} of ${stats.total} question${stats.missed.length > 1 ? 's' : ''} in this topic.
                        </div>
                        <a href="${topicInfo.url}" style="display: inline-block; padding: 0.5rem 1.5rem; background-color: #C53030; color: white; text-decoration: none; border-radius: 6px; font-weight: 600;">
                            Practice ${topicInfo.name}
                        </a>
                    </div>
                `;
            } else if (correctCount === questions.length) {
                const focusDiv = document.getElementById('focus-recommendation');
                focusDiv.style.display = 'block';
                focusDiv.style.backgroundColor = '#F0FFF4';
                focusDiv.style.border = '2px solid #48BB78';
                focusDiv.innerHTML = `
                    <div style="text-align: center; color: #276749;">
                        <div style="font-weight: 600; font-size: 1.1rem;">Perfect Score!</div>
                        <div style="font-size: 0.9rem;">Excellent work on all topics!</div>
                    </div>
                `;
            }

            document.getElementById('results-box').classList.add('show');
            document.getElementById('submit-section').style.display = 'none';

            // Scroll to results
            document.getElementById('results-box').scrollIntoView({ behavior: 'smooth' });
        }

        // Initialize
        renderQuestions();
    </script>
</body>
</html>