<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finance Practice Tool - Capital Budgeting</title>

    <!-- KaTeX for LaTeX rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

    <link rel="stylesheet" href="practice.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-nav">
                <a href="index.html" class="back-link">← Back to Topics</a>
            </div>
            <h1>Capital Budgeting</h1>
            <div class="subtitle">Week 2 - MGMT 408</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar" style="width: 0%"></div>
            </div>
            <div class="problem-number" id="progressText">Problem 1 of 10</div>
        </header>

        <div class="problem-card" id="problemCard">
            <div class="problem-header">
                <div class="problem-meta">
                    <span class="badge" id="difficultyBadge">Easy</span>
                    <span class="badge" style="background-color: #EBF8FF; color: #2C5282;" id="topicBadge">Topic</span>
                </div>
            </div>

            <div class="problem-text" id="problemText">
                Loading problem...
            </div>

            <div class="formula-box hidden" id="formulaBox">
                <div class="formula-label">Formula:</div>
                <div id="formulaText"></div>
            </div>

            <div class="answer-section">
                <div class="input-group">
                    <label for="answerInput">Your Answer:</label>
                    <input type="number" id="answerInput" step="0.01" placeholder="Enter your answer">
                    <button class="btn-primary" id="submitBtn" onclick="checkAnswer()">Submit</button>
                </div>
            </div>

            <div id="feedbackBox" class="hidden"></div>

            <div class="navigation">
                <button class="btn-secondary" id="prevBtn" onclick="previousProblem()">Previous</button>
                <button class="btn-secondary" id="nextBtn" onclick="nextProblem()">Next Problem</button>
            </div>
        </div>
    </div>

    <!-- Calculator Toolbar -->
    <div class="calculator-toolbar">
        <button class="calculator-toggle-btn" onclick="toggleCalculator()">
            Calculator
        </button>
        <div class="calculator-container" id="calculatorContainer">
            <div class="calculator-display">
                <div class="calculator-expression" id="calcExpression">&nbsp;</div>
                <div class="calculator-result" id="calcResult">0</div>
            </div>
            <div class="calculator-buttons">
                <button class="calc-btn calc-btn-clear" onclick="calcClear()">AC</button>
                <button class="calc-btn" onclick="calcBackspace()">Del</button>
                <button class="calc-btn calc-btn-operator" onclick="calcAppend('^')">x^y</button>
                <button class="calc-btn calc-btn-operator" onclick="calcAppend('/')">÷</button>

                <button class="calc-btn" onclick="calcAppend('7')">7</button>
                <button class="calc-btn" onclick="calcAppend('8')">8</button>
                <button class="calc-btn" onclick="calcAppend('9')">9</button>
                <button class="calc-btn calc-btn-operator" onclick="calcAppend('*')">x</button>

                <button class="calc-btn" onclick="calcAppend('4')">4</button>
                <button class="calc-btn" onclick="calcAppend('5')">5</button>
                <button class="calc-btn" onclick="calcAppend('6')">6</button>
                <button class="calc-btn calc-btn-operator" onclick="calcAppend('-')">-</button>

                <button class="calc-btn" onclick="calcAppend('1')">1</button>
                <button class="calc-btn" onclick="calcAppend('2')">2</button>
                <button class="calc-btn" onclick="calcAppend('3')">3</button>
                <button class="calc-btn calc-btn-operator" onclick="calcAppend('+')">+</button>

                <button class="calc-btn" onclick="calcAppend('0')">0</button>
                <button class="calc-btn" onclick="calcAppend('.')">.</button>
                <button class="calc-btn" onclick="calcAppend('(')">(</button>
                <button class="calc-btn" onclick="calcAppend(')')">)</button>

                <button class="calc-btn calc-btn-equals" onclick="calcEquals()" style="grid-column: span 4;">=</button>
            </div>
        </div>
    </div>

    <script>
        window.pageConfig = { topicKey: 'capbudget' };

        var problems = [
            {
                "id": "capbudget_001",
                "topic": "NPV Calculation",
                "difficulty": "easy",
                "problem_text": "A project requires an initial investment of $200,000 today and will generate a single cash flow of $250,000 in one year. If the opportunity cost of capital is 15%, what is the NPV of this project?",
                "formula": "NPV = -C_0 + \\frac{C_1}{1 + r}",
                "solution_steps": [
                    "Step 1: Identify cash flows: C₀ = -$200,000, C₁ = $250,000",
                    "Step 2: Discount rate r = 15%",
                    "Step 3: Calculate PV of future cash flow: $250,000 / 1.15 = $217,391",
                    "Step 4: NPV = -$200,000 + $217,391",
                    "Step 5: Final answer: NPV = $17,391"
                ],
                "correct_answer": 17391,
                "hints": {
                    "level_1": "NPV = Present Value of Benefits - Present Value of Costs",
                    "level_2": "Discount the $250,000 back one year at 15%, then subtract the initial investment",
                    "level_3": "NPV = -200,000 + 250,000/1.15"
                }
            },
            {
                "id": "capbudget_002",
                "topic": "NPV with Multiple Cash Flows",
                "difficulty": "medium",
                "problem_text": "A project requires an investment of $150,000 today and the opportunity cost of your time worth $50,000 in present value. The project will pay $300,000 in one year. If the discount rate is 20%, what is the NPV?",
                "formula": "NPV = -C_0 - \\text{Opportunity Cost} + \\frac{C_1}{1 + r}",
                "solution_steps": [
                    "Step 1: Total costs today = $150,000 + $50,000 = $200,000",
                    "Step 2: PV of benefits = $300,000 / 1.20 = $250,000",
                    "Step 3: NPV = -$200,000 + $250,000",
                    "Step 4: Final answer: NPV = $50,000"
                ],
                "correct_answer": 50000,
                "hints": {
                    "level_1": "Don't forget to include the opportunity cost of time as a cost",
                    "level_2": "Total cost = investment + opportunity cost = $200,000",
                    "level_3": "NPV = -200,000 + 300,000/1.20"
                }
            },
            {
                "id": "capbudget_003",
                "topic": "Comparing Projects by NPV",
                "difficulty": "medium",
                "problem_text": "You have two mutually exclusive projects. Project A costs $100,000 today and pays $140,000 in one year. Project B costs $200,000 today and pays $270,000 in one year. If the discount rate is 12%, what is the NPV of Project B?",
                "formula": "NPV = -C_0 + \\frac{C_1}{1 + r}",
                "solution_steps": [
                    "Step 1: Project B cash flows: C₀ = -$200,000, C₁ = $270,000",
                    "Step 2: PV of Year 1 cash flow: $270,000 / 1.12 = $241,071",
                    "Step 3: NPV = -$200,000 + $241,071",
                    "Step 4: Final answer: NPV of Project B = $41,071"
                ],
                "correct_answer": 41071,
                "hints": {
                    "level_1": "Calculate NPV for Project B using the standard formula",
                    "level_2": "Discount $270,000 by one year at 12%",
                    "level_3": "NPV = -200,000 + 270,000/1.12"
                }
            },
            {
                "id": "capbudget_004",
                "topic": "Profitability Index",
                "difficulty": "easy",
                "problem_text": "A project has an NPV of $25 million and requires an initial investment of $20 million. What is the profitability index?",
                "formula": "PI = \\frac{NPV}{\\text{Resource Consumed}}",
                "solution_steps": [
                    "Step 1: NPV = $25 million",
                    "Step 2: Initial Investment = $20 million",
                    "Step 3: Profitability Index = NPV / Initial Investment",
                    "Step 4: PI = 25 / 20 = 1.25",
                    "Step 5: Final answer: Profitability Index = 1.25"
                ],
                "correct_answer": 1.25,
                "hints": {
                    "level_1": "Profitability Index measures value created per dollar invested",
                    "level_2": "PI = NPV / Investment",
                    "level_3": "PI = 25 / 20"
                }
            },
            {
                "id": "capbudget_005",
                "topic": "Profitability Index - Project Selection",
                "difficulty": "medium",
                "problem_text": "You have $50 million to invest. Project A has NPV of $15M and costs $20M. Project B has NPV of $12M and costs $15M. Project C has NPV of $20M and costs $25M. Using the profitability index, what is the maximum total NPV you can achieve?",
                "formula": "Rank by PI = NPV/Cost, then select until budget exhausted",
                "solution_steps": [
                    "Step 1: Calculate PI for each project:",
                    "  - Project A: 15/20 = 0.75",
                    "  - Project B: 12/15 = 0.80",
                    "  - Project C: 20/25 = 0.80",
                    "Step 2: Rank by PI: B and C tied at 0.80, then A at 0.75",
                    "Step 3: Select B ($15M) + C ($25M) = $40M invested, leaves $10M",
                    "Step 4: Can't fit A ($20M) in remaining $10M",
                    "Step 5: Total NPV = $12M + $20M = $32M"
                ],
                "correct_answer": 32,
                "hints": {
                    "level_1": "Calculate PI for each project, then rank them",
                    "level_2": "PI: A=0.75, B=0.80, C=0.80. Start with highest PI projects",
                    "level_3": "B+C costs $40M and gives NPV of $32M. A doesn't fit in remaining $10M"
                }
            },
            {
                "id": "capbudget_006",
                "topic": "IRR Calculation",
                "difficulty": "medium",
                "problem_text": "A project has the following cash flows: invest $4,000 today, receive $1,500 at the end of each of the next 3 years. The IRR of this project is approximately 6.1%. If your opportunity cost of capital is 5%, what is the NPV of this project (to the nearest dollar)?",
                "formula": "NPV = -C_0 + \\frac{C_1}{1+r} + \\frac{C_2}{(1+r)^2} + \\frac{C_3}{(1+r)^3}",
                "solution_steps": [
                    "Step 1: Cash flows: C₀ = -$4,000, C₁ = C₂ = C₃ = $1,500",
                    "Step 2: Discount rate = 5%",
                    "Step 3: PV of Year 1: 1500/1.05 = $1,428.57",
                    "Step 4: PV of Year 2: 1500/1.05² = $1,360.54",
                    "Step 5: PV of Year 3: 1500/1.05³ = $1,295.76",
                    "Step 6: NPV = -4000 + 1428.57 + 1360.54 + 1295.76 = $84.87",
                    "Step 7: Final answer: NPV ≈ $85"
                ],
                "correct_answer": 85,
                "hints": {
                    "level_1": "Since IRR (6.1%) > cost of capital (5%), NPV should be positive",
                    "level_2": "Discount each $1,500 payment at 5%",
                    "level_3": "NPV = -4000 + 1500/1.05 + 1500/1.05² + 1500/1.05³"
                }
            },
            {
                "id": "capbudget_007",
                "topic": "IRR Decision Rule",
                "difficulty": "easy",
                "problem_text": "A project has an IRR of 18%. Your company's hurdle rate (opportunity cost of capital) is 12%. Based on the IRR rule, should you accept this project? Enter 1 for Yes, 0 for No.",
                "formula": "Accept if IRR > Hurdle Rate",
                "solution_steps": [
                    "Step 1: IRR = 18%",
                    "Step 2: Hurdle Rate = 12%",
                    "Step 3: Compare: 18% > 12%",
                    "Step 4: Since IRR exceeds the hurdle rate, accept the project",
                    "Step 5: Final answer: Yes (1)"
                ],
                "correct_answer": 1,
                "hints": {
                    "level_1": "The IRR rule says to accept if IRR exceeds the opportunity cost of capital",
                    "level_2": "Compare 18% to 12%",
                    "level_3": "18% > 12%, so accept"
                }
            },
            {
                "id": "capbudget_008",
                "topic": "Payback Period",
                "difficulty": "easy",
                "problem_text": "A project requires an initial investment of $80 million and generates $20 million per year in free cash flow. What is the payback period in years?",
                "formula": "Payback = \\frac{\\text{Initial Investment}}{\\text{Annual Cash Flow}}",
                "solution_steps": [
                    "Step 1: Initial Investment = $80 million",
                    "Step 2: Annual Cash Flow = $20 million",
                    "Step 3: Payback Period = Investment / Annual Cash Flow",
                    "Step 4: Payback = 80 / 20 = 4 years",
                    "Step 5: Final answer: 4 years"
                ],
                "correct_answer": 4,
                "hints": {
                    "level_1": "Payback period is how long it takes to recover your initial investment",
                    "level_2": "Divide initial investment by annual cash flow",
                    "level_3": "80 / 20 = 4 years"
                }
            },
            {
                "id": "capbudget_009",
                "topic": "NPV vs Payback",
                "difficulty": "medium",
                "problem_text": "A project requires $60 million today and generates $12 million per year for 8 years. Your company has a 5-year payback rule and uses an 8% discount rate. What is the NPV of this project (in millions)?",
                "formula": "NPV = -C_0 + C \\times \\frac{1 - 1/(1+r)^n}{r}",
                "solution_steps": [
                    "Step 1: This is an annuity: $12M per year for 8 years",
                    "Step 2: PV of annuity = 12 × [1 - 1/(1.08)^8] / 0.08",
                    "Step 3: = 12 × [1 - 0.5403] / 0.08",
                    "Step 4: = 12 × 5.7466 = $68.96M",
                    "Step 5: NPV = -60 + 68.96 = $8.96M",
                    "Step 6: Final answer: NPV ≈ $9 million"
                ],
                "correct_answer": 9,
                "hints": {
                    "level_1": "Use the annuity formula to find PV of the 8 years of cash flows",
                    "level_2": "PV = 12 × annuity factor for 8 years at 8%",
                    "level_3": "Annuity factor = 5.7466, so PV = $68.96M, NPV = -60 + 68.96"
                }
            },
            {
                "id": "capbudget_010",
                "topic": "Free Cash Flow",
                "difficulty": "hard",
                "problem_text": "A project has revenues of $500,000, costs of $300,000, and depreciation of $50,000. The tax rate is 25%. There is no change in NWC and no CapEx this year. What is the Free Cash Flow?",
                "formula": "FCF = (Rev - Costs - Dep)(1 - \\tau) + Dep - CapEx - \\Delta NWC",
                "solution_steps": [
                    "Step 1: Calculate EBIT = Revenue - Costs - Depreciation",
                    "Step 2: EBIT = 500,000 - 300,000 - 50,000 = $150,000",
                    "Step 3: Taxes = EBIT × tax rate = 150,000 × 0.25 = $37,500",
                    "Step 4: Unlevered Net Income = EBIT - Taxes = 150,000 - 37,500 = $112,500",
                    "Step 5: FCF = UNI + Depreciation - CapEx - ΔNWC",
                    "Step 6: FCF = 112,500 + 50,000 - 0 - 0 = $162,500"
                ],
                "correct_answer": 162500,
                "hints": {
                    "level_1": "FCF = Unlevered Net Income + Depreciation (add back non-cash expense)",
                    "level_2": "First calculate EBIT, then taxes, then add back depreciation",
                    "level_3": "EBIT = $150K, Taxes = $37.5K, UNI = $112.5K, FCF = $112.5K + $50K"
                }
            }
        ];
    </script>
    <script src="practice.js"></script>
</body>
</html>
